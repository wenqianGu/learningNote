# JavaScript

* å¼±ç±»åž‹ VS Java, C++, C#
* è„šæœ¬è¯­è¨€ VS JAVAï¼Œ C++ï¼ŒC#

```javascript
function sum(a, b) {
    return a + b;
}

function sum(a: number, b: number): number {
    return a + b;
}
```

* compile (ç¼–è¯‘) and run
    * ç¼–è¯‘ ->æ•´è¡Œ æ•´ç¯‡ç¼–è¯‘
    * è§£é‡Šåž‹è¯­è¨€ ->ä¸€è¡Œä¸€è¡Œçš„ç¼– è¯‘
* runtime è§£é‡ŠçŽ¯å¢ƒ

### JSç›¸æ¯”è¾ƒå…¶ä»–è¯­è¨€çš„ä¼˜åŠ¿

* å¼±ç±»åž‹ è„šæœ¬è¯­è¨€
    * è„šæœ¬è¯­è¨€çš„ä¼˜åŠ¿ï¼š

# keywords

| keyword     | Description                                                                        |
|-------------|------------------------------------------------------------------------------------|
| break       | Terminates a switch or a loop                                                      |
| Continue    | Jumps out of a loop and starts at te top                                           |
| Debugger    | Stops the execution of JavaScript, and calls (if available) the debugging function |
| do... while | Execute a block of statements, and repeats the block, while a condition is true    |
| for         | Marks a block of statement to be executed, as long as a condition is true          |
| function    | Declares a function                                                                |
| if...else   | Marks a block of statements to be executed, depending on a condition               |
| return      | Exits a function                                                                   |
| switch      | Marks a block of statements to be executed, depending on different cases           |
| try...catch | Implements error handling to a block of statements                                 |
| var         | Declares a variable                                                                |

### try...catch / throw new Error()

```javascript
  var a = 1;
var b = 'abc';

function sum(a, b) {
    if (isNaN(a)) {
        throw new Error('arg 1 is not a number');
    }
    if (isNaN(b)) {
        throw new Error('arg 2 is not a number');
    }
    return a + b;
}

try {
    // å¦‚æžœé‡åˆ°é”™è¯¯ï¼Œè¿™é‡Œçš„ä»£ç æ²¡æœ‰è¢«æ‰§è¡Œ
    var result = sum(1, 'abc');
    console.log(result);

    var resultPlus2 = sum(result, 2);
    console.log(resultPlus2);

    var resultPlus2Plus3 = sum(resultPlus2, 3);
    console.log(resultPlus2Plus3);
} catch (error) {
    console.log(error);
    console.log(`something wrong...`);
}

//è¿™ä¸€è¡Œä¸€å®šè¦è¢«æ‰§è¡Œ
console.log('Hello world');
```

## 2. Statements

* Javascript ç¨‹åºæ‰§è¡Œçš„å•ä½ä¸ºè¡Œï¼ˆlineï¼‰ï¼Œä¹Ÿå°±æ˜¯ä¸€è¡Œä¸€è¡Œåœ°æ‰§è¡Œã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæ¯ä¸€è¡Œå°±æ˜¯ä¸€ä¸ªè¯­å¥ã€‚

```javascript
var a, b, c // declare 3 variables
a = 5       //assign the value 5 t a
b = 6       // assign the value 6 to b
c = a + b     //assign the sum of a and b to c
```

### 2.a Semicolons

* è¯­å¥ä»¥åˆ†å·ç»“å°¾ï¼Œä¸€ä¸ªåˆ†å·å°±è¡¨ç¤ºä¸€ä¸ªè¯­å¥ç»“æŸã€‚ å¤šä¸ªè¯­å¥å¯ä»¥å†™åœ¨ä¸€è¡Œå†…ã€‚

```js
var a, b, c;
a = 5;
b = 6;
c = a + b;
```

### 2.b white space

* è¯­å¥ä¸­é¢å¤–çš„ç©ºæ ¼ä¼šè¢«å¿½ç•¥

```js
var person = "Alice";
var person = "Alice";
```

## 3. Variable

* å˜é‡æ˜¯å¯¹â€˜å€¼â€™çš„å…·åå¼•ç”¨ã€‚å˜é‡å°±æ˜¯ä¸ºâ€˜å€¼â€™èµ·åï¼Œç„¶åŽå¼•ç”¨è¿™ä¸ªåå­—ï¼Œå°±ç­‰åŒäºŽå¼•ç”¨è¿™ä¸ªå€¼ã€‚
* JavaScript çš„å˜é‡ååŒºåˆ†å¤§å°å†™ï¼Œ'name','Name'æ˜¯ä¸¤ä¸ªä¸åŒçš„å˜é‡

### 3.a types

1. æ•°å€¼ / number :æ•´æ•°å’Œå°æ•°
2. å­—ç¬¦ä¸² / string :æ–‡æœ¬
3. å¸ƒå°”å€¼ / boolean: true false
4. undefined ï¼šè¡¨ç¤ºæœªå®šä¹‰æˆ–ä¸å­˜åœ¨ï¼Œ å³ç”±äºŽç›®å‰æ²¡æœ‰å®šä¹‰ï¼Œæ‰€ä»¥æ­¤å¤„æš‚æ—¶æ²¡æœ‰ä»»ä½•å€¼
5. nullï¼šè¡¨ç¤ºç©ºå€¼ï¼Œå³æ­¤å¤„çš„å€¼ä¸ºç©º
6. objectï¼šå„ç§å€¼çš„é›†åˆ

```js
function sum(a, b) {
    return a + b;
}
```

* sum -> object
    * å¼±ç±»åž‹è¯­è¨€
    * classæ˜¯ä¸€ä¸‹é‚£ä¸ªç±»åž‹ -> object
    * Array ->object

### 3.b Hoisting (å˜é‡æå‡)

### 3.c Identifier

* ç¬¬ä¸€ä¸ªå­—ç¬¦ï¼Œå¯ä»¥æ˜¯ä»»æ„ unicodeå­—æ¯ï¼ˆåŒ…æ‹¬è‹±æ–‡å­—æ¯å’Œå…¶ä»–è¯­è¨€çš„å­—æ¯ï¼‰ï¼Œä»¥åŠç¾Žå…ƒ$å’Œä¸‹åˆ’çº¿_
* ç¬¬äºŒä¸ªå­—ç¬¦ä»¥åŠåŽé¢çš„å­—ç¬¦ï¼Œé™¤äº†unicodeå­—æ¯ï¼Œç¾Žå…ƒç¬¦å·å’Œä¸‹åˆ’çº¿ï¼Œè¿˜å¯ä»¥ç”¨æ•°å­— 0-9

```js
arg0
_temp
$elem
ðŸ±
var ä¸´æ—¶çš„å˜é‡ = 1; // ä¸­æ–‡æ˜¯åˆæ³•çš„æ ‡è¯†ç¬¦ï¼Œå¯ä»¥ç”¨ä½œå˜é‡å
// not support
1
a
23
***
a + b
- d
```

## æ¡ä»¶è¯­å¥

### 4.a a if...else

### 4.b Comparison Operators

* '===' and '==' (ä¸¥æ ¼)ç›¸ç­‰
    * ä¸¥æ ¼ç›¸ç­‰ï¼Œä¸ä»…æ•°å€¼ç›¸ç­‰ï¼Œå­—ç¬¦ç±»åž‹ä¹Ÿè¦ç›¸ç­‰
    * é¸­å­åŽŸåˆ™
    * Falsy
        * 0
        * false
        * ''
        * null
        * undefined
    * Truthy
        * 12321
        * true
        * 'abc'
    * åŸºæœ¬ç±»åž‹ ç›´æŽ¥æ¯”è¾ƒå€¼ -> pass by value
        * string, number, boolean, undefined, null
    * é«˜çº§ç±»åž‹ï¼Œæ¯”è¾ƒå†…å­˜åœ°å€ -> pass by reference
        * object ->æ¯æ¬¡å£°æ˜Žæ–°çš„å˜é‡çš„æ—¶å€™ï¼ŒæŒ‡å‘æ–°çš„å†…å­˜

```js
3 === 3 // true
3 === '3' // false
3 == '3' // true

{} =={} // false
{} === {} // false
```

```js
var a = {};
var b = a;
b.name = 'name';
console.log(a.name) // 'name' -> a,bæŒ‡å‘ç›¸åŒçš„å†…å­˜åœ°å€
```

* pass by reference
    * å¯¹referenceçš„ä»»ä½•æ›´æ”¹ï¼Œéƒ½ä¼šååº”åˆ°å¤–éƒ¨çš„å˜é‡

```js
var a = {};

function whatMyName(arg) {
    arg.name = 'Lisa';
    return arg;
}

var b = whatMyName(a);
console.log(b.name);  // Lisa
console.log(a.name); // Lisa -> pass a's reference
```

* pass by value ->ä¼ é€’å€¼æœ¬èº«ï¼Œä¸ä¼šä¿®æ”¹å¤–éƒ¨å˜é‡çš„å€¼

```js
var a = 'Alice'

function whatMyName(arg) {
    arg = 'Bob';
    return arg;
}

var b = whatMyName(a);
console.log(b) // 'Bob'
console.log(a) // 'Alice' ->pass a's value. 
```

```js
var a = {
    name: 'Alice'
}

function whatMyName(arg) {
    arg = 'Bob'
    return arg;
}

var b = whatMyName(a.name); // pass by value
console.log(b); // Bob
console.log(a.name); // Alice
```
* è™½ç„¶æŽ¥å—çš„argæ˜¯object, ä½†æ˜¯å‡½æ•°å†…éƒ¨é‡æ–°å®šä¹‰å£°æ˜Žäº†äº†ä¸€ä¸ªæ–°çš„obj
  * å†…å­˜åœ°å€åªè¯»ï¼Œä¸å¯ä»¥è¢«æ›´æ”¹ açš„å†…å­˜åœ°å€åœ¨å£°æ˜Žæ—¶ï¼Œå·²ç»å›ºå®šäº†ã€‚
```js
var a={
    name:'Alice'
}
function whatMyName(arg) {
    arg = { // å£°æ˜Žäº†æ–°çš„objectï¼ŒæŒ‡å‘äº†æ–°çš„å†…å­˜åœ°å€
     name:'Bob'   
    }
    return arg;
}

var b = whatMyName(a); // 
console.log(b.name); //  Bob
console.log(a.name); //  Alice
```
* undefined VS null
  * å½“æˆ‘ä»¬å£°æ˜Žä¸€ä¸ªå€¼çš„æ—¶å€™ï¼Œå½“è¿™ä¸ªå€¼æ²¡æœ‰è¢«å®šä¹‰ï¼Œè€Œä¸”ä¸éœ€è¦è¢«å®šä¹‰çš„æ—¶å€™ï¼Œç”¨undefined
  * å½“æˆ‘ä»¬è¦å£°æ˜Žä¸€ä¸ªå€¼ï¼Œå¹¶ä¸”å¼ºè°ƒæ˜¯ç©ºçš„æ—¶å€™ï¼Œç”¨null
```js
function getStudentName(id){
    var student = DB.getStudentByID(id)
    if(!studnt){
        return // return null is much better. 
    }
    return student.name;
}
var name = getStudentName('INVALID_ID');
console.log(name); // undefined è¿™é‡Œä¸æ¸…æ¥š-> return æ²¡æœ‰å®šä¹‰å†…å®¹ã€‚å¦‚æžœreturn null, è¿™é‡Œå°±æ˜¯null
```

### 4.c Swtich 
* å¤šä¸ªif...else è¿žåœ¨ä¸€èµ·ä½¿ç”¨çš„æ—¶å€™ï¼Œå¯ä»¥è½¬ä¸ºä½¿ç”¨æ›´æ–¹ä¾¿çš„switchç»“æž„
```js
switch (fruit) {
    case "banana":
        //...
        break;
    case "apple":
        //...
        break;
    default:
        //....
}
```

### 4.d Conditional Operator
* ä¸‰å…ƒè¡¨è¾¾å¼
* `ï¼ˆæ¡ä»¶ï¼‰ï¼Ÿè¡¨è¾¾å¼_å·¦ ï¼š è¡¨è¾¾å¼_å³`

```js
var name = 'Alice';
var isMyName = (name === 'Alice') ? true : false;
var isMyName;
if (name === 'Alice'){
    isMyName = true;
}
```

### 4.e çŸ­è·¯è®¡ç®—
    * JS æ˜¯ä¸€ä¸ªå¼±ç±»åž‹è¯­è¨€ï¼Œjs ä¼šå°½åŠ›æŠŠjsä»£ç æ‰§è¡Œèµ·æ¥
    * JS çŸ­è·¯è®¡ç®—ç¤ºä¾‹
* AND
```js
if(condition){
    return value
}
var isMyCat = cat.id === 'CAT_ID' 
var catName = isMyCat && 'Luna' // Luna

var isMyCat = cat.id === 'INVALID_ID'
var catName = isMyCat && 'Luna' // false

if(catName){
    welcome(catName);
}


// condition && value;
    true && anything // -> anything;
    false && anything // ->  false;



```
* OR
```js
a||b
true || anything // -> true;
false || anything // -> anthing

'Luna' || 'æ—ºè´¢' // 'Luna'
false || 'æ—ºè´¢' // 'æ—ºè´¢'
var user ={}
// ç”¨ç®€å•çš„ä»£ç ï¼Œå†™å‡ºæ¥äº†å¤æ‚çš„é€»è¾‘
// çŸ­è·¯è®¡ç®—ï¼Œä¸æ˜¯å¿…è¦çš„ï¼Œä½†æ˜¯å¸¦æ¥äº†æ— é™çš„å¯èƒ½æ€§ï¼›
var mostValuableMessage = use.isVIP && 'æ¬¢è¿Žæœ€æœ€æœ€å°Šè´µé¢VIPç™»å½•' // true && anything -> anything
var å†¤å¤§å¤´Message = user.å†¤å¤§å¤´ && 'äº²ï¼Œå……å€¼æ‰ä¼šå˜å¼º'
var è…¾è®¯çŽ©å®¶Mesage = user.tencent && 'å……å€¼ä¸ä¸€å®šä¼šå˜å¼ºï¼Œä½†ä¸€å®šä¼šå¿«ä¹'
var welcomeMessage = mostValuableMessage || å†¤å¤§    å¤´Message || è…¾è®¯çŽ©å®¶Mesage ||'æ¬¢è¿Žç™»å½•'

// å¦å¤–ä¸€ç§å†™æ³•
var welcomeMessage
if(user.isVIP){
    welcomeMessage = 'æ¬¢è¿Žæœ€æœ€æœ€å°Šè´µé¢VIPç™»å½•'
} else if(user.å†¤å¤§å¤´){
    welcomeMessage = 'äº²ï¼Œå……å€¼æ‰ä¼šå˜å¼º'
}else if(è…¾è®¯çŽ©å®¶Mesage){
    welcomeMessage = 'å……å€¼ä¸ä¸€å®šä¼šå˜å¼ºï¼Œä½†ä¸€å®šä¼šå¿«ä¹'
}else{
    welcomeMessage = 'æ¬¢è¿Žç™»å½•'
}

// ç¬¬ä¸‰ç§å†™æ³•
user.isVIP = user.isVIP? 'æ¬¢è¿Žæœ€æœ€æœ€å°Šè´µé¢VIPç™»å½•' : user.å†¤å¤§å¤´ ? 'äº²ï¼Œå……å€¼æ‰ä¼šå˜å¼º':user.tencent? 'å……å€¼ä¸ä¸€å®šä¼šå˜å¼ºï¼Œä½†ä¸€å®šä¼šå¿«ä¹':'æ¬¢è¿Žç™»å½•' ;

```


## function is the first class citizen -> å‡½æ•°æ˜¯å¹³å¤´è€ç™¾å§“
* objectå¯ä»¥åšçš„äº‹æƒ…ï¼Œå‡½æ•°éƒ½å¯ä»¥åš
* ä¸è¦ç»™ å‡½æ•°ä»»ä½•ç‰¹æƒ

```js
// var a = {};
// a.name = 'Alice';
// console.log(a.name);
//å‡½æ•°èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡
function sum(a,b){
    return a + b;
}
sum.name = 'Alice';
console.log(sum.name);
// var a = {};
// var b = sum; // å‡½æ•°èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡
// b(1,2) //3

// // pass object to a function
// var student = {};
// function enroll(date){
//    
// }
// enroll(student);

//åŒ¿åå‡½æ•° ->å‡½æ•°èµ‹å€¼ç»™å˜é‡ä¹‹åŽï¼Œå¯ä»¥åŽ»æŽ‰å‡½æ•°åå­—
var sum = function (a,b){
    return a + b;
}
calculator(function (a,b){
    return a + b;
}); 

// å‡½æ•°å¤åˆ¶ç»™objçš„ä¸€ä¸ªkey -> pass function to an object key
// function greeting(name){
//     console.log(`Hi : ${name}`)
// }
// var student = {
//     greeting: greeting
// }

var student = {
    greeting:function (name){
        console.log(`Hi : ${name}`)
    }
}
student.greeting('Alice');
```
## è¯¾ä¸Šä½œä¸š
1. Flight Stops (Qantas)
Given by an array of flights, returns stops statment to user
- flights:[{origin:'MEL', destination:'CAN'}] -> Direct
- flights:[{origin:'MEL', destination:'CAN'},{origin:'CAN', destination:'PFG'}] -> '1 stop'
- flights:[{origin:'MEL', destination:'CAN'},{origin:'CAN', destination:'PFG'},{origin:'PFG', destination:'HK'}] -> '2 stops'
- flights:[{origin:'MEL', destination:'CAN'},{HKG - CAN},{CAN - SNG},{origin:'CAN', destination:'PVG'}] -> 'n stops'
getStops(flight) -> return direct, 1 stop, 2 stops, 3 stops


2. Tax Calculation(MYOB)

| Income thresholds | Rate  | Tax payable on this income                 |
|-------------------|-------|--------------------------------------------|
| $0-$18,200        | 0%    | Nil                                        |
| $18,200 - $37,000 | 19%   | 19c for each $1 over $18,200               |
| $37,000 - $90,000 | 20.5% | $3,572 plus 20.5% of amounts over $ 37,000 |
| $90,001 - $18,000 | 37%   | $20,797 plus 37% of amounts over $90,000   |
| $18,001 and over  | 45%   | $54,096 plus 45% of amounts over $18,000   |

### å†™ä»£ç çš„åŽŸåˆ™
* readable! Maintainable! Reusable! 
    * IF ELSE æ˜¯ä¸€å®šæœ‰é—®é¢˜çš„ï¼Œ
    * åµŒå¥—é€»è¾‘ï¼Œä¸€å®šæœ‰æ›´å¤§çš„é—®é¢˜
    * ç®€å•çš„é‡å¤ï¼Œå¤§äºŽå¤æ‚çš„æŠ½è±¡ aha avoid hasty abstractions

#### SOLID åŽŸåˆ™
1. ç¬¦åˆäººç±»æ€è€ƒæ–¹å¼ ï¼ˆè™šæ— ç¼¥ç¼ˆï¼‰
2. ä¸æ˜¯ if else ï¼š äºŒæžç®¡
3. ä»£ç å‡ºå‡ºçŽ°if else ä¸€å®šæ˜¯æœ‰é—®é¢˜çš„ï¼ ä»£ç ä¸­å‡ºçŽ° if else ä¸€å®šæœ‰é—®é¢˜çš„ ï¼ä»£ç ä¸­å‡ºçŽ° if else ä¸€å®šæœ‰é—®é¢˜çš„ ï¼
4. bad smell
5. è‡ªæ£€ï¼Œè·³å‡ºèˆ’é€‚åŒº
6. refactor é‡æž„
7. SOLIDåŽŸåˆ™ï¼Œé»„é‡‘ç§˜ç±ï¼Œå¤–æŒ‚
   * Readable å¯è¯»æ€§
   * Maintainable å¯ç»´æŠ¤æ€§
   * Reusable  å¯å¤ç”¨æ€§
* SOLID é¢å‘å¯¹è±¡è®¾è®¡ 
    * S å•ä¸€åŠŸèƒ½æ›´åŽŸåˆ™   single responsibility 
    * O å¼€é—­åŽŸåˆ™        open / close
    * ä¾èµ–æ³¨å…¥          Dependencies injection 

### Vanila JS
* Vanila Js is a fast, lightweight, cross-platform framework for including incredible powerful JavaScript applications. 
* Vanilla JS æ˜¯åŸºäºŽNative JS å¯¹æµè§ˆå™¨APPè¿›è¡Œå¼€å‘
*  Node JSæ˜¯åŸºäºŽ Native JS å¯¹æœåŠ¡å™¨è¿›è¡Œå¼€å‘

```js
const getStops = flightLength => {return {0: 'Direct', 1:'1 stop'}[flightLength -1] || `${flightLength -1} stops` }
document.body.innerHTML = ''
const input = document.createElement('input') 
input.id = 'flightLength'
document.body.append(input)
document.body.style.padding = '120px'
const button = document.createElement('button');
button.innerHTML = 'submit'
document.body.append(button);
button.onclick = function() {const value = document.getElementById('flightLength').value; const stops = getStops(value); document.body.append(stops)}
```

## è§£æž„èµ‹å€¼

```js
const student = {
    id: 0,
    name: 'Alice',
    email: 'Alice@gmail.com',
    address:'',
    age: '26',
    courses: [{
        id: '666',
    name :'Introduction to JavaScript',
    },
    { name: 'How to give up JavaScript' }]
};
//const address = student.address || 'Unknow';  // è§£æž„èŽ·å–åˆ°addressï¼Œå¦‚æžœä¸ºç©º é»˜è®¤å€¼ä¸ºUnknown 
const {
    name: somthingName, // rename variable-name to somethingName
    address = 'Unknow', // è§£æž„çš„æ—¶å€™èµ‹å€¼ï¼Œå¦‚æžœæ²¡æœ‰addressï¼Œé»˜è®¤èµ‹å€¼ä¸º unknowï¼› es6 é»˜è®¤èµ‹å€¼ æ˜¯ = 
    email,
    age,
    courses: [{ name: introductionName }, { name: giveUpName }] // è¦ä¸Žcourseçš„ç»“æž„ä¸€è‡´,nameé‡åï¼Œå¯ä»¥é‡å‘½å
} = student;

console.log(address);

// æ‰¾åˆ°å­¦ç”Ÿçš„courseä¿¡æ¯ï¼Œenroleåˆ°enrollmenté‡Œé¢

const enrollStudent = (student) => {
    const {id:stuID, courses} = student;
    courses.array.forEach( (course) => {
        const{id: courseID} = course;
        const enrollment = Course.find(courseID);
        enrollment.enroll(studentID);
    });
}

// ç›´æŽ¥æŠŠè§£æž„æ”¾åˆ°å‚æ•°é‡Œé¢ - çŸ¥è¯†ç‚¹ not best practise

const enrollStudent2 = ({id:stuID, courses}) => { 
    courses.array.forEach( ({id: courseID}) => {
        const enrollment = Course.find(courseID);
        enrollment.enroll(studentID);
    });
} 
```
#### æµ…æ‹·è´
* spread cna be used in destructed
* è§£æž„èµ‹å€¼çš„æ—¶å€™ï¼Œå¯ä»¥ç”¨...è¿›è¡Œæµ…æ‹·è´ 
* 
```js
const basedCourse = {
    unit:60,
    price:2000,
}

const introductionToJs = {
    ...basedCourse,
    name:'Introduction to JavaScript'
}

const giveUpJs = {
    ...basedCourse,
    name:'Give up JavaScript'
}
```
```js
const a ={
    nested:{} // é»˜è®¤æ‹·è´çš„æ¨¡å¼ï¼Œæ˜¯reference
};
const b = {...a} 
console.log(a === b) // false -> b is refering to a new memory position.
console.log(a.nested === b.nested) // true

```

